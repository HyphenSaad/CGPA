function CreateElement(e,t,r=""){let a=document.createElement(e);for(let e in t)a.setAttribute(e,t[e]);return a.innerText=r,a}function RemoveCourse(e,t){let r=document.getElementsByClassName("semester")[e-1].children[2];document.getElementById(`sem-${e}-course-${t}`).remove(),CalculateSGPA(`${e}`),r.childElementCount<2&&RemoveSemester(e)}function CreateCourse(e){let t=CreateElement("li",{class:"course",id:`sem-${e}-course-${ID}`});t.appendChild(CreateElement("input",{class:"course-title",type:"text",placeholder:"Course Title",oninput:"SaveData()"}));let r=CreateElement("select",{name:"grade",class:"course-grade",oninput:`CalculateSGPA(${e})`});r.appendChild(CreateElement("option",{selected:"selected",hidden:"hidden",disabled:"disabled"},"Grade"));for(let e=0;e<GradePoints.length;++e)r.appendChild(CreateElement("option",{value:GradePoints[e]},Grades[e]));t.appendChild(r),t.appendChild(CreateElement("span",{class:"break"})),t.appendChild(CreateElement("input",{class:"course-credit-hours",type:"number",placeholder:"Credit Hours",min:"1",oninput:`CalculateSGPA(${e})`})),t.appendChild(CreateElement("button",{class:"remove-course-button",onclick:`RemoveCourse(${e},${ID})`},"Remove  ✖")),document.getElementById(`sem-${e}`).insertBefore(t,document.getElementById(`end-${e}`)),ID++}function CreateSemester(){let e=CreateElement("div",{class:"semester shadow"});e.appendChild(CreateElement("h1",{id:"semester-title"},`Semester ${++SemesterCount<9?"0"+SemesterCount:SemesterCount}`)),e.appendChild(CreateElement("button",{class:"remove-semester-button",onclick:`RemoveSemester(${SemesterCount})`},"✖"));let t=CreateElement("ul",{class:"semester-courses",id:`sem-${SemesterCount}`}),r=CreateElement("div",{class:"semester-end",id:`end-${SemesterCount}`}),a=CreateElement("h3",{class:"semester-result"},"SGPA: ");a.appendChild(CreateElement("span",{},"0.00")),r.appendChild(a),r.appendChild(CreateElement("button",{class:"add-course-button",onclick:`CreateCourse(${SemesterCount})`},"Add Course")),t.appendChild(r),e.appendChild(t),document.getElementById("main-container").appendChild(e);for(let e=0;e<3;++e)CreateCourse(SemesterCount);UpdateProgress()}function RemoveSemester(e){delete TotalRecord[`sem-${e}`],CalculateCGPA(),document.getElementById(`sem-${e}`).parentNode.remove(),ReNumberSemesters()}function ReNumberSemesters(){SemesterCount=0;let e=document.getElementsByClassName("semester");for(let t=0;t<e.length;++t)e[t].children[0].innerText=`Semester ${++SemesterCount<9?"0"+SemesterCount:SemesterCount}`}function CalculateSGPA(e){let t=document.getElementsByClassName("semester")[e-1].children[2].children,r=0,a=0;for(let e=0;e<t.length-1;++e){let s=parseFloat(t[e].children[1].value),o=parseFloat(t[e].children[3].value);r+=(isNaN(s)?0:s)*(isNaN(o)?0:o),a+=isNaN(o)?0:o}let s=r/a;document.getElementsByClassName("semester-result")[e-1].children[0].innerText=(isNaN(s)?0:s).toFixed(2),TotalRecord[`sem-${e}`]={Points:r,Credits:a},CalculateCGPA();let o=document.getElementsByClassName("course-grade");for(Key in o)"Grade"===o[Key].value&&o[Key].setAttribute("name","earnedGrade")}function CalculateCGPA(){let e=JSON.parse(localStorage.getItem("previous-data")),t=0,r=0,a=parseInt(e.creditHours),s=parseFloat(e.currentCGPA);for(key in TotalRecord)t+=TotalRecord[key].Points,r+=TotalRecord[key].Credits;CGPA=(t+a*s)/(r+a),CGPA=CGPA.toString().match(new RegExp("^-?\\d+(?:.\\d{0,2})?"))[0],UpdateProgress(isNaN(CGPA)?0:CGPA),SaveData()}function SetProgressBar(e,t){let r=document.getElementsByClassName(e)[0],a=r.r.baseVal.value,s=2*a*Math.PI;r.style.strokeDasharray=`${s} ${s}`,r.style.strokeDashoffset=s-t/100*s}function UpdateProgress(e=0){SetProgressBar("x-bar",75),SetProgressBar("y-bar",18.75*e),SetProgressBar("z-bar",25),document.getElementsByClassName("CGPA-earned")[0].innerHTML=Number(e).toFixed(2)}function ReadData(){let e={},t=document.getElementsByClassName("semester-courses");for(let r=0,a=0;r<t.length;r++){let s=new Object;for(let e=0;e<t[r].children.length-1;e++){let o=new Object;o.title=t[r].children[e].children[0].value,o.grade=t[r].children[e].children[1].value;let l=t[r].children[e].children[3].value;o.credits=isNaN(l)?-1:l,s[a++]=o}e[r]=s}return e}function PreviousRecord(){let e={};e.name=document.getElementsByClassName("student-name")[0].value,e.currentCGPA=document.getElementsByClassName("currentCgpa")[0].value,e.creditHours=document.getElementsByClassName("totalCredits")[0].value,localStorage.removeItem("previous-data"),localStorage.setItem("previous-data",JSON.stringify(e))}function SaveData(){PreviousRecord(),localStorage.removeItem("course-data"),localStorage.setItem("course-data",JSON.stringify(ReadData()))}function UpdateData(){let e=JSON.parse(localStorage.getItem("course-data")),t=JSON.parse(localStorage.getItem("previous-data"));document.getElementsByClassName("student-name")[0].value=t.name,document.getElementsByClassName("currentCgpa")[0].value=t.currentCGPA,document.getElementsByClassName("totalCredits")[0].value=t.creditHours;let r=document.getElementsByClassName("semester-courses"),a=0,s=0;for(Semester in e){for(Course in a>0&&CreateSemester(),s=0,e[Semester])if(void 0!==r[a].children[s].children[1].value){let t=e[Semester][Course].title,o=e[Semester][Course].grade,l=e[Semester][Course].credits;""===t&&"Grade"===o&&""===l||(s>2&&CreateCourse(a+1),r[a].children[s].children[0].value=t,"Grade"!==o&&(r[a].children[s].children[1].value=o),-1!==l&&(r[a].children[s].children[3].value=l),s++)}CalculateSGPA(parseInt(1+a)),a++}}function ChangeColorMode(){let e=getComputedStyle(document.documentElement).getPropertyValue("--mode"),t=document.documentElement.style;1==e?(t.setProperty("--mode","0"),t.setProperty("--bg-color","#0f0f0f"),t.setProperty("--fg-color","#F5F5F5"),t.setProperty("--fg-color-uf","#ababab"),t.setProperty("--header-bg","#252525"),t.setProperty("--header-fg","#F5F5F5"),t.setProperty("--shadow-color","#252525"),document.getElementById("colorMode").innerText="Light Mode"):(t.setProperty("--mode","1"),t.setProperty("--bg-color","#ffffff"),t.setProperty("--fg-color","#000000"),t.setProperty("--fg-color-uf","#808080"),t.setProperty("--header-bg","#000000"),t.setProperty("--header-fg","#ffffff"),t.setProperty("--shadow-color","#cecece"),document.getElementById("colorMode").innerText="Dark Mode")}const GradePoints=["4.00","3.75","3.50","3.00","2.50","2.00","1.50","1.00","0.00"],Grades=["A","A-","B+","B","C","C+","D","D+","F"];let TotalRecord=new Object,ID=0,SemesterCount=0;window.matchMedia("(prefers-color-scheme: dark)").matches&&(document.getElementById("colorMode").innerText="Light Mode"),CreateSemester(),UpdateData();